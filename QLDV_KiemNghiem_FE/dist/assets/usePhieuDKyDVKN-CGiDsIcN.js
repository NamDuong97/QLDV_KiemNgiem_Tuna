var x=r=>{throw TypeError(r)};var R=(r,e,t)=>e.has(r)||x("Cannot "+t);var u=(r,e,t)=>(R(r,e,"read from private field"),t?t.call(r):e.get(r)),D=(r,e,t)=>e.has(r)?x("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),y=(r,e,t,s)=>(R(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),d=(r,e,t)=>(R(r,e,"access private method"),t);import{aK as J,aL as b,aM as X,y as Z,r as G,aN as ee,aO as _,aP as l,x as te,au as A}from"./index-BDpQ_Sx3.js";import{Q as z,u as se,a as re,e as ne,b as ae,c as ue,s as B,f as k,w as ie,g as oe,d as U}from"./useQuery-6MwmGPBQ.js";function $(r,e){return r.filter(t=>!e.includes(t))}function ce(r,e,t){const s=r.slice(0);return s[e]=t,s}var H,K,f,M,C,m,O,P,N,h,S,L,q,v,Q,j,he=(j=class extends J{constructor(e,t,s){super();D(this,h);D(this,H);D(this,K);D(this,f);D(this,M);D(this,C);D(this,m);D(this,O);D(this,P);D(this,N,[]);y(this,H,e),y(this,M,s),y(this,f,[]),y(this,C,[]),y(this,K,[]),this.setQueries(t)}onSubscribe(){this.listeners.size===1&&u(this,C).forEach(e=>{e.subscribe(t=>{d(this,h,v).call(this,e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,u(this,C).forEach(e=>{e.destroy()})}setQueries(e,t){y(this,f,e),y(this,M,t);{const s=e.map(a=>u(this,H).defaultQueryOptions(a).queryHash);new Set(s).size!==s.length&&console.warn("[QueriesObserver]: Duplicate Queries found. This might result in unexpected behavior.")}b.batch(()=>{const s=u(this,C),a=d(this,h,q).call(this,u(this,f));y(this,N,a),a.forEach(o=>o.observer.setOptions(o.defaultedQueryOptions));const n=a.map(o=>o.observer),i=n.map(o=>o.getCurrentResult()),c=n.some((o,I)=>o!==s[I]);s.length===n.length&&!c||(y(this,C,n),y(this,K,i),this.hasListeners()&&($(s,n).forEach(o=>{o.destroy()}),$(n,s).forEach(o=>{o.subscribe(I=>{d(this,h,v).call(this,o,I)})}),d(this,h,Q).call(this)))})}getCurrentResult(){return u(this,K)}getQueries(){return u(this,C).map(e=>e.getCurrentQuery())}getObservers(){return u(this,C)}getOptimisticResult(e,t){const s=d(this,h,q).call(this,e),a=s.map(n=>n.observer.getOptimisticResult(n.defaultedQueryOptions));return[a,n=>d(this,h,L).call(this,n??a,t),()=>d(this,h,S).call(this,a,s)]}},H=new WeakMap,K=new WeakMap,f=new WeakMap,M=new WeakMap,C=new WeakMap,m=new WeakMap,O=new WeakMap,P=new WeakMap,N=new WeakMap,h=new WeakSet,S=function(e,t){return t.map((s,a)=>{const n=e[a];return s.defaultedQueryOptions.notifyOnChangeProps?n:s.observer.trackResult(n,i=>{t.forEach(c=>{c.observer.trackProp(i)})})})},L=function(e,t){return t?((!u(this,m)||u(this,K)!==u(this,P)||t!==u(this,O))&&(y(this,O,t),y(this,P,u(this,K)),y(this,m,X(u(this,m),t(e)))),u(this,m)):e},q=function(e){const t=new Map(u(this,C).map(a=>[a.options.queryHash,a])),s=[];return e.forEach(a=>{const n=u(this,H).defaultQueryOptions(a),i=t.get(n.queryHash);i?s.push({defaultedQueryOptions:n,observer:i}):s.push({defaultedQueryOptions:n,observer:new z(u(this,H),n)})}),s},v=function(e,t){const s=u(this,C).indexOf(e);s!==-1&&(y(this,K,ce(u(this,K),s,t)),d(this,h,Q).call(this))},Q=function(){var e;if(this.hasListeners()){const t=u(this,m),s=d(this,h,S).call(this,u(this,K),u(this,N)),a=d(this,h,L).call(this,s,(e=u(this,M))==null?void 0:e.combine);t!==a&&b.batch(()=>{this.listeners.forEach(n=>{n(u(this,K))})})}},j);function ye({queries:r,...e},t){const s=Z(),a=se(),n=re(),i=G.useMemo(()=>r.map(p=>{const T=s.defaultQueryOptions(p);return T._optimisticResults=a?"isRestoring":"optimistic",T}),[r,s,a]);i.forEach(p=>{ne(p),ae(p,n)}),ue(n);const[c]=G.useState(()=>new he(s,i,e)),[o,I,W]=c.getOptimisticResult(i,e.combine),Y=!a&&e.subscribed!==!1;G.useSyncExternalStore(G.useCallback(p=>Y?c.subscribe(b.batchCalls(p)):ee,[c,Y]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),G.useEffect(()=>{c.setQueries(i,e)},[i,e,c]);const V=o.some((p,T)=>B(i[T],p))?o.flatMap((p,T)=>{const g=i[T];if(g){const F=new z(s,g);if(B(g,p))return k(g,F,n);ie(p,a)&&k(g,F,n)}return[]}):[];if(V.length>0)throw Promise.all(V);const w=o.find((p,T)=>{const g=i[T];return g&&oe({result:p,errorResetBoundary:n,throwOnError:g.throwOnError,query:s.getQueryCache().get(g.queryHash),suspense:g.suspense})});if(w!=null&&w.error)throw w.error;return I(W())}class E{static async getPhieuDangKyKiemNghiemByTrangThai(e){try{const t=await _.get(`${l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.GET_ALL_PHIEU_DANG_KY_BY_TRANG_THAI}?maKH=${e.maKH}&maTrangThaiPhieuDangKy=${e.maTrangThaiPhieuDangKy}`);return t==null?void 0:t.data}catch(t){return t}}static async createPhieuDKyDVKN(e){try{return await _.post(l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.CREATE_PHIEU_DANG_KY,e,{headers:{"Content-Type":"application/json"}})}catch(t){return t}}static async createDmMau(e){try{return await _.post(l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.CREATE_DANH_MUC_MAU,e,{headers:{"Content-Type":"application/json"}})}catch(t){return t}}static async createTieuChuan(e){try{return await _.post(l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.CREATE_TRANG_THAI,e,{headers:{"Content-Type":"application/json"}})}catch(t){return t}}static async createDmPhuLieuHoaChat(e){try{return await _.post(l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.CREATE_DANH_MUC_PLHC,e,{headers:{"Content-Type":"application/json"}})}catch(t){return t}}static async getDmMauAll(){try{const e=await _.get(l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.GET_DANH_MUC_MAU_ALL);return e==null?void 0:e.data}catch(e){return console.log("res",e),e}}static async getLoaiDichVuAll(){try{const e=await _.get(l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.GET_LOAI_DICH_VU_ALL);return e==null?void 0:e.data}catch(e){return e}}static async getTrangThaiPhieuDkAll(){try{const e=await _.get(l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.GET_TRANG_THAI_DKY_ALL);return e==null?void 0:e.data}catch(e){return e}}static async getTieuChuanAll(){try{const e=await _.get(l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.GET_TIEU_CHUAN_ALL);return e==null?void 0:e.data}catch(e){return e}}static async getLoaiMauAll(){try{const e=await _.get(l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.GET_LOAI_MAU_ALL);return e==null?void 0:e.data}catch(e){return e}}static async getDmPhuLieuHoaChatAll(){try{const e=await _.get(l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.GET_DANH_MUC_PLHC);return e==null?void 0:e.data}catch(e){return e}}static async getThoiGianTieuChuan(e){try{const t=await _.get(`${l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.GET_THOI_GIAN_TIEU_CHUAN}?maDmMau=${e.maDmMau}&maTieuChuan=${e.maTieuChuan}`);return t==null?void 0:t.data}catch(t){return t}}static async updatePhieuDangKy(e){try{const t=await _.put(l.CUSTOMER.UPDATE_PHIEU_DANG_KY,e,{headers:{"Content-Type":"application/json"}});return t==null?void 0:t.data}catch(t){return t}}static async HuyPhieuDangKy(e){try{const t=await _.delete(`${l.CUSTOMER.HUY_PHIEU_DANG_KY}?maPhieuDangKy=${e}`,{headers:{"Content-Type":"application/json"}});return t==null?void 0:t.data}catch(t){return t}}static async getLocPhieuDky(e){try{const t=await _.get(l.CUSTOMER.PHIEU_DANG_KY_DICH_VU_KIEM_NGHIEM.GET_LOC_PHIEU_DANG_KY_BY_TRANG_THAI,{params:e});return t==null?void 0:t.data}catch(t){return t}}}const Ke=r=>{const{queryKey:e,maKH:t,trangThaiIDs:s}=r,a=ye({queries:s.map(c=>({queryKey:[e,c],queryFn:async()=>{const o={maKH:t,maTrangThaiPhieuDangKy:c};return await E.getPhieuDangKyKiemNghiemByTrangThai(o)},staleTime:1/0,cacheTime:1/0}))}),n=a.flatMap(c=>c.data??[]),i=a.some(c=>c.isLoading);return{data:n,isLoading:i}},Ce=r=>{const{queryKey:e}=r;return U({queryKey:[e],queryFn:async()=>await E.getDmMauAll(),staleTime:1/0})},De=r=>{const{queryKey:e}=r;return U({queryKey:[e],queryFn:async()=>await E.getDmPhuLieuHoaChatAll()})},de=r=>{const{queryKey:e}=r;return U({queryKey:[e],queryFn:async()=>await E.getLoaiDichVuAll()})},ge=r=>{const{queryKey:e,options:t}=r;return U({queryKey:[e],queryFn:async()=>await E.getLoaiMauAll(),...t,refetchOnMount:!1,refetchOnWindowFocus:!1})},Te=r=>{const{queryKey:e,options:t}=r;return U({queryKey:[e],queryFn:async()=>await E.getTieuChuanAll(),...t,refetchOnMount:!1,refetchOnWindowFocus:!1})},me=r=>{const{queryKey:e,onSettled:t,handleClickOpenPopupNofitication:s}=r,a=te(n=>n.showNotification);return A({mutationKey:[e],mutationFn:async n=>await E.createPhieuDKyDVKN(n),onSuccess:n=>{n.status!==200?a({message:"Lỗi Server",status:400}):s==null||s()},onSettled:t})},He=r=>{const{queryKey:e,onSettled:t,onSuccess:s,onError:a}=r;return A({mutationKey:[e],mutationFn:async n=>await E.createDmMau(n),onSuccess:s,onError:a,onSettled:t})},Ie=r=>{const{queryKey:e,onSettled:t,onSuccess:s,onError:a}=r;return A({mutationKey:[e],mutationFn:async n=>await E.createTieuChuan(n),onSuccess:s,onError:a,onSettled:t})},fe=r=>{const{queryKey:e,onSettled:t}=r;return A({mutationKey:[e],mutationFn:async s=>await E.createDmPhuLieuHoaChat(s),onSuccess:s=>{s!==200&&console.log("Lỗi Server")},onSettled:t})},Me=r=>{const{queryKey:e,maTieuChuan:t,maDmMau:s}=r;return U({queryKey:[e,t,s],queryFn:async()=>{if(s&&t){let a={maDmMau:s,maTieuChuan:t};return await E.getThoiGianTieuChuan(a)}return null}})},Ae=r=>{const{queryKey:e,onSettled:t,onSuccess:s,onError:a}=r;return A({mutationKey:[e],mutationFn:async n=>await E.updatePhieuDangKy(n),onSuccess:s,onError:a,onSettled:t})},Ue=r=>{const{queryKey:e,onSettled:t,onSuccess:s,onError:a}=r;return A({mutationKey:[e],mutationFn:async n=>await E.HuyPhieuDangKy(n),onSuccess:s,onError:a,onSettled:t})};export{Ue as a,Ae as b,ge as c,He as d,Ie as e,Ce as f,Te as g,de as h,Me as i,De as j,fe as k,me as l,Ke as u};
