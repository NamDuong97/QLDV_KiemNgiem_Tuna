import{r as t,b0 as k,j as y,b1 as S,b2 as I,b3 as A,b4 as W,b5 as B,b6 as D,b7 as G}from"./index-BDpQ_Sx3.js";class H extends t.Component{getSnapshotBeforeUpdate(u){const e=this.props.childRef.current;if(e&&u.isPresent&&!this.props.isPresent){const i=e.offsetParent,f=S(i)&&i.offsetWidth||0,n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft,n.right=f-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function K({children:s,isPresent:u,anchorX:e}){const i=t.useId(),f=t.useRef(null),n=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=t.useContext(k);return t.useInsertionEffect(()=>{const{width:x,height:r,top:C,left:o,right:a}=n.current;if(u||!f.current||!x||!r)return;const d=e==="left"?`left: ${o}`:`right: ${a}`;f.current.dataset.motionPopId=i;const c=document.createElement("style");return p&&(c.nonce=p),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${x}px !important;
            height: ${r}px !important;
            ${d}px !important;
            top: ${C}px !important;
          }
        `),()=>{document.head.contains(c)&&document.head.removeChild(c)}},[u]),y.jsx(H,{isPresent:u,childRef:f,sizeRef:n,children:t.cloneElement(s,{ref:f})})}const T=({children:s,initial:u,isPresent:e,onExitComplete:i,custom:f,presenceAffectsLayout:n,mode:p,anchorX:x})=>{const r=I(U),C=t.useId();let o=!0,a=t.useMemo(()=>(o=!1,{id:C,initial:u,isPresent:e,custom:f,onExitComplete:d=>{r.set(d,!0);for(const c of r.values())if(!c)return;i&&i()},register:d=>(r.set(d,!1),()=>r.delete(d))}),[e,r,i]);return n&&o&&(a={...a}),t.useMemo(()=>{r.forEach((d,c)=>r.set(c,!1))},[e]),t.useEffect(()=>{!e&&!r.size&&i&&i()},[e]),p==="popLayout"&&(s=y.jsx(K,{isPresent:e,anchorX:x,children:s})),y.jsx(A.Provider,{value:a,children:s})};function U(){return new Map}const E=s=>s.key||"";function j(s){const u=[];return t.Children.forEach(s,e=>{t.isValidElement(e)&&u.push(e)}),u}const V=({children:s,custom:u,initial:e=!0,onExitComplete:i,presenceAffectsLayout:f=!0,mode:n="sync",propagate:p=!1,anchorX:x="left"})=>{const[r,C]=W(p),o=t.useMemo(()=>j(s),[s]),a=p&&!r?[]:o.map(E),d=t.useRef(!0),c=t.useRef(o),g=I(()=>new Map),[z,$]=t.useState(o),[m,R]=t.useState(o);B(()=>{d.current=!1,c.current=o;for(let h=0;h<m.length;h++){const l=E(m[h]);a.includes(l)?g.delete(l):g.get(l)!==!0&&g.set(l,!1)}},[m,a.length,a.join("-")]);const b=[];if(o!==z){let h=[...o];for(let l=0;l<m.length;l++){const w=m[l],P=E(w);a.includes(P)||(h.splice(l,0,w),b.push(w))}return n==="wait"&&b.length&&(h=b),R(j(h)),$(o),null}n==="wait"&&m.length>1&&console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to "wait". This will lead to odd visual behaviour.`);const{forceRender:M}=t.useContext(D);return y.jsx(y.Fragment,{children:m.map(h=>{const l=E(h),w=p&&!r?!1:o===m||a.includes(l),P=()=>{if(g.has(l))g.set(l,!0);else return;let v=!0;g.forEach(L=>{L||(v=!1)}),v&&(M==null||M(),R(c.current),p&&(C==null||C()),i&&i())};return y.jsx(T,{isPresent:w,initial:!d.current||e?void 0:!1,custom:u,presenceAffectsLayout:f,mode:n,onExitComplete:w?void 0:P,anchorX:x,children:h},l)})})};function X(s){return G({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.504 13.616l-3.79-3.223c-0.392-0.353-0.811-0.514-1.149-0.499 0.895-1.048 1.435-2.407 1.435-3.893 0-3.314-2.686-6-6-6s-6 2.686-6 6 2.686 6 6 6c1.486 0 2.845-0.54 3.893-1.435-0.016 0.338 0.146 0.757 0.499 1.149l3.223 3.79c0.552 0.613 1.453 0.665 2.003 0.115s0.498-1.452-0.115-2.003zM6 10c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"},child:[]}]})(s)}export{V as A,X as I};
